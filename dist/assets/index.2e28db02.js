import{r as I,o as m,c as f,t as z,a as N,b as Q,d as de,e as r,n as K,u as v,m as ue,f as _e,g as me,h as pe,E as k,i as J,j as he,k as ge,l as fe,p as ve,q as ye,F as W,s as Y,v as R,w as y,x as G,y as X,z as _,A as be,B as ke,C as u,D as V,G as xe,H as Se,I as Ee,J as Ie,K as we,L as Ce,M as De,N as Ae,O as H,P as $,Q as Te,R as Le}from"./vendor.999b5c7f.js";const $e=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=o(n);fetch(n.href,c)}};$e();var P=(a,e)=>{const o=a.__vccOpts||a;for(const[i,n]of e)o[i]=n;return o};const Pe={class:"copyright"},Re={setup(a){const e=new Date().getFullYear(),o=I(0);return o.value=e>2022?2022+"-"+e:2022,(i,n)=>(m(),f("footer",Pe," \xA9"+z(o.value)+" bloniea. All rights reserved. ",1))}};var Ve=P(Re,[["__scopeId","data-v-8ceb944e"]]);const Oe={class:"back-to-top"},ze={setup(a){const e=N({defaultBackTopHeight:900,height:900}),o=()=>{const n=document.documentElement.clientHeight;document.documentElement.scrollTop>200?e.height=e.defaultBackTopHeight-n+50:e.height=e.defaultBackTopHeight};Q(()=>{document.addEventListener("scroll",o)}),de(()=>{document.removeEventListener("scroll",o)});const i=()=>{let n=document.documentElement.scrollTop||document.body.scrollTop,c=setInterval(()=>{document.body.scrollTop=document.documentElement.scrollTop=n-=50,n<=0&&clearInterval(c)},10)};return(n,c)=>(m(),f("div",Oe,[r("div",{class:"cat",style:K("transform:translateY(-"+v(e).height+"px)"),onClick:i},null,4)]))}};var Ne=P(ze,[["__scopeId","data-v-c8c2d002"]]);const h={loading:"https://cloud.bloniea.xyz/images/loading.gif",defaultImgUrl:"https://cloud.bloniea.xyz/images/QQ202202112105073c3b326c7ae7c45a.png",avatar:"https://cloud.bloniea.xyz/images/avatar.png",url:"https://bloniea.xyz/",auth:{gitee:{client_id:"4a5503cddc755a561c01b98f87589d4373f23d2a29d36d4d2eaf6e65ad9f8b63",client_secret:"be98a59cc0836f3cf23a72c83dd16a37f9b66000cfbb984ebd592a0a7e9931e8",oauth_api:"https://gitee.com/oauth/",oauth_api_p:"/gitee_api/",token:"token",api:"https://gitee.com/api/v5/"},github:{client_id:"3cc3fe9a9b02c3c327ac",client_secret:"7e82548ab0ab1c17abf5cd9883850755dcc03c6f",oauth_api:"https://github.com/login/oauth/",oauth_api_p:"/github_api/",token:"access_token",api:"https://api.github.com/"},redirect_uri:"https://bloniea.xyz/"},avatar_error:"https://cloud.bloniea.xyz/images/avatar_error.png",avatar_default:"https://cloud.bloniea.xyz/images/default_avatar.png",aboutTitles:[{title:"bloniea"},{title:"\u767E\u5408\u63A7"},{title:"\u6211\u601D,\u6545\u767E\u5408\u5728,\u7136\u800C\u767E\u5408\u5374\u4E0D\u9700\u8981\u6211\u7684\u5B58\u5728"},{title:"\u6211\u53EA\u60F3\u8BF4\u6CA1\u6587\u5316\u771F\u53EF\u6015"}],contacts:[{url:"https://gitee.com/bloniea",img_url:"https://cloud.bloniea.xyz/images/gitee.png"},{url:"tencent://message/?uin=2032580075&Site=bloniea&Menu=yes",img_url:"https://cloud.bloniea.xyz/images/QQ.png"},{url:"http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=tdHQ2dzG3dTZ2sPQ2czM2vXExJvW2tg",img_url:"https://cloud.bloniea.xyz/images/Email.png"}]};const Wt=a=>{let o=new Date(a*1e3).toDateString().split(" ");return o[1]+". "+o[2]+". "+o[3]},Yt=a=>{let e=/<\/?.+?>/g;return ue.parse(a).replace(e,"")},He=a=>{const e=localStorage.getItem("type"),o={code:a,client_id:h.auth[e].client_id,redirect_uri:h.auth.redirect_uri,client_secret:h.auth[e].client_secret};return e=="gitee"&&(o.grant_type="authorization_code"),o},Me=a=>{let e="?";for(let o in a)e+=o+"="+a[o]+"&";return e=e.substring(0,e.length-1),e},je=(a,e)=>{const o=a.indexOf(e),i=a.indexOf("&",o);let n="";if(o>-1)return n=i>-1?a.substring(o+e.length,i):a.substring(o+e.length),n};const qe=a=>(Ie("data-v-0f7eadc2"),a=a(),we(),a),Be={class:"nav"},Ue={class:"title"},Fe=qe(()=>r("img",{src:"https://cloud.bloniea.xyz/images/logo.png"},null,-1)),Qe=[Fe],Ke={class:"nav-names"},Je=["onClick"],We={key:0,class:"nav-names-app"},Ye=["onClick"],Ge={class:"option"},Xe={class:"search"},Ze={class:"user"},et=["src"],tt=["src"],ot=y("\u4E2A\u4EBA\u4E2D\u5FC3"),nt=y("\u9000\u51FA "),st=y("\u767B\u5F55"),at={key:0,class:"app-nav"},ct=["onClick"],rt={class:"login-input"},it={class:"login-pc"},lt={class:"login-btns"},dt={class:"gitee"},ut=y("gitee"),_t={class:"github"},mt=y("github"),pt={class:"login-footer"},ht=y("Cancel"),gt={class:"login-app"},ft={class:"login-btns"},vt={class:"gitee"},yt=y("gitee"),bt={class:"github"},kt=y("github"),xt={class:"login-footer"},St=y("Cancel"),Et={setup(a){const e=I(""),o=I(!0),{proxy:i}=xe(),n=N([{id:1,label:"\u4E3B\u9875",name:"home",icon:"iconhome",class:"home"},{id:3,label:"\u5206\u7C7B",name:"Categories",icon:"icon14",class:"categories"},{id:5,label:"\u53CB\u94FE",name:"Friends",icon:"iconlove",class:"friends"},{id:6,label:"\u5173\u4E8E",name:"About",icon:"iconguanyu",class:"about"}]),c=I(!1),l=_e(),x=t=>{c.value=!c.value,l.push("/"+t)},E=()=>{c.value=!c.value};(()=>{const t=()=>{c.value&&(c.value=!c)};document.addEventListener("touch",t),document.removeEventListener("touch",t,!0),document.addEventListener("click",t),document.removeEventListener("click",t,!0),document.addEventListener("scroll",t),document.removeEventListener("scroll",t,!0)})();const w=()=>{localStorage.removeItem("refresh_token"),localStorage.removeItem("code"),localStorage.removeItem("access_token"),localStorage.removeItem("type"),localStorage.removeItem("userinfo")},C=me(),te=()=>{const t=I("");localStorage.getItem("searchName")?t.value=C.name!="SearchDetail"?C.name:localStorage.getItem("searchName"):t.value=C.name!="SearchDetail"?C.name:"Home",localStorage.setItem("searchName",t.value),l.push({name:"ReloadSearch",query:{keyword:e.value}})},T=new pe,D=I(!1),j=t=>{se(t),console.log(t)},oe=()=>{let t="";for(let s=0,p=7;s<p;s++)t+=Math.floor(Math.random()*10).toString();return t},ne=()=>{let t=window.location.pathname+window.location.search;const s=t.indexOf("code=");s>-1&&(t=t.substring(0,s-1)),localStorage.setItem("path",t)},se=t=>{if(console.log(t),t){ne();let s={};localStorage.setItem("type",t),t=="gitee"&&(s.client_id=h.auth[t].client_id,s.redirect_uri=h.auth.redirect_uri,s.response_type="code",s.scope="user_info"),t=="github"&&(s.client_id=h.auth[t].client_id,s.redirect_uri=encodeURIComponent(window.location.href),s.state=oe());const p=Me(s),g=h.auth[t].oauth_api+"/authorize/";window.location.href=g+p}};(()=>{const t=window.location.href,s=je(t,"code=");s&&(localStorage.setItem("code",s),l.push({name:"Refresh"}))})(),(()=>{const t=localStorage.getItem("code");if(t&&t!=null){const s=He(t),p=localStorage.getItem("type");let g=h.auth[p].oauth_api_p+h.auth[p].token;k({message:"\u767B\u5F55\u4E2D",type:"info",duration:0}),i.$axios({url:g,method:"post",headers:{Accept:"application/json"},data:s}).then(async({data:S})=>{localStorage.removeItem("code"),localStorage.setItem("access_token",S.access_token),localStorage.setItem("refresh_token",S.refresh_token),q()}).catch(()=>{k.closeAll(),k.error("\u767B\u5F55\u5931\u8D25\uFF0C\u7F51\u7EDC\u8D85\u65F6")})}})();const q=()=>{const t=localStorage.getItem("access_token"),s=localStorage.getItem("type");if(t&&t!=""&&s&&s!=""){let p=null;s=="gitee"?p={params:{access_token:t}}:s=="github"&&(p={params:{access_token:t},headers:{Authorization:"bearer "+t}}),i.$axios.get(h.auth[s].api+"user",p).then(({data:g})=>{ae(g)}).catch(async()=>{const g=localStorage.getItem("refresh_token");if(g&&g!=""){const S={grant_type:"refresh_token",refresh_token:g},{data:L}=await i.$axios.post(h.auth[s].oauth_api+"token",{params:S});localStorage.setItem("access_token",L.access_token),localStorage.setItem("refresh_token",L.refresh_token),q()}else k.error("\u767B\u5F55\u5931\u6548,\u8BF7\u91CD\u65B0\u767B\u5F55"),w()})}else k.error("\u767B\u5F55\u5931\u6548,\u8BF7\u91CD\u65B0\u767B\u5F55"),w()},ae=async t=>{const s={id:t.id,name:t.name,avatar_url:t.avatar_url,html_url:t.html_url},{data:p}=await i.$axios.post("/api/saveuser",s);p.meta.status!=200&&(w(),k.closeAll(),k.error("\u7F51\u7EDC\u8D85\u65F6")),localStorage.setItem("userinfo",JSON.stringify(t)),T.commit("setStatus",!0),T.commit("setUserinfo",t),k.closeAll(),setTimeout(()=>{k.success("\u767B\u5F55\u6210\u529F")},1500)},O=()=>{D.value=!D.value},ce=()=>{w(),T.commit("setStatus",!1)},B=J(()=>T.state.status),re=J(()=>T.state.userinfo);I(!0);const U=()=>{l.push({name:"Me"})};return(t,s)=>{const p=he,g=Se,S=ge,L=fe,ie=ve,A=Ee,F=ye;return m(),f("nav",null,[r("div",Be,[r("div",Ue,[r("div",{class:"logo",onClick:s[0]||(s[0]=d=>t.$router.push("/home"))},Qe)]),r("div",Ke,[r("ul",null,[(m(!0),f(W,null,Y(v(n),d=>(m(),f("li",{key:d.id,onClick:le=>x(d.name),class:R(d.class)},[r("i",{class:R("iconfont "+d.icon)},null,2),y(z(d.label),1)],10,Je))),128))])]),c.value?(m(),f("div",We,[r("ul",null,[(m(!0),f(W,null,Y(v(n),d=>(m(),f("li",{key:d.id,onClick:G(le=>x(d.name),["stop"]),class:R(d.class)},[r("i",{class:R("iconfont "+d.icon)},null,2),y(z(d.label),1)],10,Ye))),128))])])):X("",!0),r("div",Ge,[r("div",Xe,[_(p,{modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=d=>e.value=d),placeholder:"search","suffix-icon":v(be),onKeyup:ke(te,["enter"])},null,8,["modelValue","suffix-icon","onKeyup"])]),r("div",Ze,[_(ie,null,{dropdown:u(()=>[v(B)?(m(),V(L,{key:0},{default:u(()=>[_(S,{onClick:U},{default:u(()=>[ot]),_:1}),_(S,{onClick:ce},{default:u(()=>[nt]),_:1})]),_:1})):(m(),V(L,{key:1},{default:u(()=>[_(S,{onClick:O},{default:u(()=>[st]),_:1})]),_:1}))]),default:u(()=>[v(B)?(m(),V(g,{key:0,size:40,src:v(re).avatar_url,onClick:U},{default:u(()=>[r("img",{src:v(h).avatar_error},null,8,et)]),_:1},8,["src"])):(m(),V(g,{key:1,size:50,src:v(h).avatar_default},{default:u(()=>[r("img",{src:v(h).avatar_error},null,8,tt)]),_:1},8,["src"]))]),_:1})]),o.value?(m(),f("div",at,[r("i",{class:"iconfont iconcaidan",onClick:G(E,["stop"])},null,8,ct)])):X("",!0),r("div",rt,[r("div",it,[_(F,{modelValue:D.value,"onUpdate:modelValue":s[4]||(s[4]=d=>D.value=d),title:"\u8BF7\u767B\u5F55",width:"30%",center:"","custom-class":"login"},{footer:u(()=>[r("span",pt,[_(A,{onClick:O},{default:u(()=>[ht]),_:1})])]),default:u(()=>[r("div",lt,[r("div",dt,[_(A,{onClick:s[2]||(s[2]=d=>j("gitee"))},{default:u(()=>[ut]),_:1})]),r("div",_t,[_(A,{onClick:s[3]||(s[3]=d=>j("github"))},{default:u(()=>[mt]),_:1})])])]),_:1},8,["modelValue"])]),r("div",gt,[_(F,{modelValue:D.value,"onUpdate:modelValue":s[5]||(s[5]=d=>D.value=d),title:"\u8BF7\u767B\u5F55",width:"70%",center:"","custom-class":"login"},{footer:u(()=>[r("span",xt,[_(A,{onClick:O},{default:u(()=>[St]),_:1})])]),default:u(()=>[r("div",ft,[r("div",vt,[_(A,null,{default:u(()=>[yt]),_:1})]),r("div",bt,[_(A,null,{default:u(()=>[kt]),_:1})])])]),_:1},8,["modelValue"])])])])])])}}};var It=P(Et,[["__scopeId","data-v-0f7eadc2"]]);const wt={class:"progress-box"},Ct={setup(a){const e=N({width:0}),o=()=>{document.addEventListener("scroll",i=>{const n=document.documentElement.scrollHeight,c=document.documentElement.clientHeight||document.body.clientHeight,l=Math.ceil(document.documentElement.scrollTop||document.body.scrollTop),x=n-l-c,E=n-l-x;e.width=Math.round(l/(n-E)*100)})};return Q(()=>{o()}),(i,n)=>(m(),f("div",wt,[r("div",{class:"top-progress",style:K("width:"+v(e).width+"%;")},null,4)]))}};var Dt=P(Ct,[["__scopeId","data-v-ee8c406e"]]);const At={},Tt={class:"container"};function Lt(a,e,o,i,n,c){const l=Dt,x=It,E=Ce("router-view"),w=Ne,C=Ve;return m(),f("div",Tt,[_(l),_(x),r("main",null,[_(E)]),_(w),_(C)])}var $t=P(At,[["render",Lt],["__scopeId","data-v-379bcda9"]]);const Pt="modulepreload",Z={},Rt="/",b=function(e,o){return!o||o.length===0?e():Promise.all(o.map(i=>{if(i=`${Rt}${i}`,i in Z)return;Z[i]=!0;const n=i.endsWith(".css"),c=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${c}`))return;const l=document.createElement("link");if(l.rel=n?"stylesheet":Pt,n||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),n)return new Promise((x,E)=>{l.addEventListener("load",x),l.addEventListener("error",E)})})).then(()=>e())},Vt=()=>b(()=>import("./index.10f4f987.js"),["assets/index.10f4f987.js","assets/index.5d00103e.css","assets/el-image-viewer.07fde959.css","assets/index.vue_vue_type_style_index_0_scoped_true_lang.d1132217.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.4cbb8377.js","assets/index.3b71e527.css","assets/index.9eecfc87.js","assets/index.71f642fe.css"]),Ot=()=>b(()=>import("./index.5c8f176c.js"),["assets/index.5c8f176c.js","assets/index.6f1a78cd.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.9eecfc87.js","assets/index.71f642fe.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.4cbb8377.js","assets/index.3b71e527.css"]),zt=()=>b(()=>import("./index.6b7a256a.js"),["assets/index.6b7a256a.js","assets/index.4f763daf.css","assets/el-image-viewer.07fde959.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.f190d37a.js","assets/index.a3768d27.css","assets/index.592fa128.js","assets/index.739ac421.css","assets/index.9eecfc87.js","assets/index.71f642fe.css"]),Nt=()=>b(()=>import("./index.507451d7.js"),["assets/index.507451d7.js","assets/index.01a0aec9.css","assets/el-image-viewer.07fde959.css","assets/index.vue_vue_type_style_index_0_scoped_true_lang.d1132217.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.f190d37a.js","assets/index.a3768d27.css"]),Ht=()=>b(()=>import("./index.6e6195d5.js"),["assets/index.6e6195d5.js","assets/index.170b9ce0.css","assets/el-image-viewer.07fde959.css","assets/index.9eecfc87.js","assets/index.71f642fe.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.592fa128.js","assets/index.739ac421.css","assets/index.f190d37a.js","assets/index.a3768d27.css"]),Mt=()=>b(()=>import("./index.dba8a913.js"),["assets/index.dba8a913.js","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css"]),jt=()=>b(()=>import("./index.825cc614.js"),["assets/index.825cc614.js","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css"]),qt=()=>b(()=>import("./index.19f6cdd0.js"),["assets/index.19f6cdd0.js","assets/index.c2935c6a.css","assets/el-image-viewer.07fde959.css","assets/index.9eecfc87.js","assets/index.71f642fe.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.f190d37a.js","assets/index.a3768d27.css","assets/index.592fa128.js","assets/index.739ac421.css"]),Bt=()=>b(()=>import("./index.c4187d55.js"),["assets/index.c4187d55.js","assets/index.0afa6363.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css"]),Ut=()=>b(()=>import("./index.42d8d2cb.js"),["assets/index.42d8d2cb.js","assets/index.52723c25.css","assets/el-image-viewer.07fde959.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css","assets/index.4cbb8377.js","assets/index.3b71e527.css"]),Ft=()=>b(()=>import("./index.7d0a7ca8.js"),["assets/index.7d0a7ca8.js","assets/index.5563f33a.css","assets/el-image-viewer.07fde959.css","assets/vendor.999b5c7f.js","assets/vendor.8e5ef253.css","assets/index.d03a1f4f.js","assets/index.a045e8b7.css"]),Qt=[{path:"/",redirect:"/home"},{path:"/home",name:"Home",component:Vt},{path:"/categories",name:"Categories",component:Ot},{path:"/category/:id",name:"CategoryDetail",component:zt},{path:"/article/:id",name:"ArticleDetail",component:Nt},{path:"/search",name:"SearchDetail",component:Ht,meta:{keepAlive:!0}},{path:"/reloadsearch",name:"ReloadSearch",component:Mt},{path:"/refresh",name:"Refresh",component:jt},{path:"/me",name:"Me",component:qt},{path:"/about",name:"About",component:Bt},{path:"/friends",name:"Friends",component:Ut},{path:"/404",name:"NotFound",component:Ft},{path:"/:pathMatch(.*)*",redirect:"/404"}],M=De({history:Ae(),routes:Qt});H.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});M.beforeEach((a,e,o)=>{H.start(),o()});M.afterEach(()=>{H.done()});$.defaults.retry=4;$.defaults.retryDelay=1e3;$.interceptors.response.use(void 0,function(e){var o=e.config;if(!o||!o.retry||(o.__retryCount=o.__retryCount||0,o.__retryCount>=o.retry))return Promise.reject(e);o.__retryCount+=1;var i=new Promise(function(n){setTimeout(function(){n()},o.retryDelay||1)});return i.then(function(){return $(o)})});const Kt=Te({state(){const a=localStorage.getItem("access_token"),e=localStorage.getItem("userinfo");return{token:a||"",userinfo:JSON.parse(e)||null,status:!!(a&&e),commentStatus:!1}},mutations:{setStatus(a,e){a.status=e},setUserinfo(a,e){a.userinfo=e},setCommentIsNull(a,e){a.commentStatus=e}}}),ee=Le($t);ee.config.globalProperties.$axios=$;ee.use(M).use(Kt).mount("#app");export{P as _,Yt as b,h as c,Wt as f};
